<!DOCTYPE html>
<html lang='en'>
   <head>
      <meta charset='UTF-8'>
      <title>Tree-js</title>
   </head>
   <body>
    <div id='root'></div>
    <script type='text/javascript'>

    closeHandler = (myNode, button, tagName ) => {
      let elements = myNode.getElementsByTagName(tagName);
      if(elements.length !== 0 & button.innerHTML =='CLOSE'){
        button.innerHTML = 'OPEN';
        for(e of elements) e.style.visibility = 'hidden';
        return;
      }
      if(elements.length !== 0 & button.innerHTML =='OPEN') {
        button.innerHTML = 'CLOSE';
        for(e of elements) e.style.visibility = 'visible';
        return;
      }
    }
////////////////////////////////////////////////////////////
    createNode = (name) => {
      const node = document.createElement('div');
      node.style.display = 'flex';
      node.style.flexDirection = 'column';
      node.style.justifyContent = 'center';
      node.style.alignItems = 'center';
      node.style.border = `2px solid rgb(${parseInt(Math.random()*300)}, 0, ${parseInt(Math.random()*200)})`;
      node.style.margin = '10px';
      node.style.padding = '10px';
      node.style.overflow = 'hidden';

      const node_name = document.createElement('h3');
      node_name.innerHTML = name;

      const node_add = document.createElement('button');
      node_add.innerHTML = 'ADD';
      node_add.style.margin = '10px';
      let i = 0;
      node_add.onclick = () => node.appendChild(createNode(`${name}${i++}`));

      const node_remove = document.createElement('button');
      node_remove.innerHTML = 'REMOVE';
      node_remove.style.margin = '10px';
      node_remove.onclick = () => node.remove();

      const node_close = document.createElement('button');
      node_close.innerHTML = 'CLOSE';
      node_close.style.margin = '10px';

      const content = document.createElement('section');
      content.appendChild(node_name);
      content.appendChild(node_add);
      content.appendChild(node_remove);
      content.appendChild(node_close);
      content.style.display = 'flex';
      content.style.justifyContent = 'center';
      content.style.alignItems = 'center';
      content.style.margin = '0px';
      content.style.padding = '0px';
      content.style.overflow = 'hidden';
      content.style.flexFlow = 'row wrap';

      node_close.addEventListener('click', () => closeHandler(node, node_close, 'div'));
      //node_close.onclick = () => closeHandler(node, node_close, 'div');
      node.appendChild(content);
      return node;
    }
///////////////////////////////////////////////////////
    const container = document.getElementById('root');
    const container_name = document.createElement('h3');
    container_name.innerHTML = 'ROOT';

    const container_add = document.createElement('button');
    container_add.innerHTML = 'ADD';
    let i = 0;
    container_add.onclick = () => container.appendChild(createNode(`Ghild${i++}`));

    const container_close = document.createElement('button');
    container_close.innerHTML = 'CLOSE';
    container_close.addEventListener('click', () => closeHandler(container, container_close, 'div'));
    //container_close.onclick = () => closeHandler(container, container_close, 'div');
    container.appendChild(container_name);
    container.appendChild(container_add);
    container.appendChild(container_close);
    container.style.display = 'flex';
    container.style.flexDirection = 'column';
    container.style.alignItems = 'center';

    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang='en'>
   <head>
      <meta charset='UTF-8'>
      <title>hands-js</title>
   </head>
   <body>
    <div id='root'></div>
    <script type='text/javascript'>

    const createNode = (name , i) => {
      const node = document.createElement('div');
      node.style.display = 'flex';
      node.style.flexDirection = 'column';
      node.style.justifyContent = 'center';
      node.style.alignItems = 'center';
      node.style.border = `2px solid rgb(${parseInt(Math.random()*300)}, 0, ${parseInt(Math.random()*200)})`;
      node.style.margin = '10px';
      node.style.padding = '10px';
      node.style.overflow = 'hidden';
      node.style.borderRadius = '50%';

      const node_name = document.createElement('h3');
      node_name.innerHTML = name;

      const node_add = document.createElement('button');
      node_add.innerHTML = 'ADD';
      node_add.style.margin = '10px';

      node_add.onclick = () => {
        let child = createNode(`${name}${i}`, ++i);
        node.appendChild(child);
      }

      const node_remove = document.createElement('button');
      node_remove.innerHTML = 'REMOVE';
      node_remove.style.margin = '10px';

      node_remove.onclick = () => {
        node.remove();
      }

      const node_hands = document.createElement('button');
      node_hands.innerHTML = 'hands';
      node_hands.style.margin = '10px';

      node_hands.onclick = () => {
        let hand = createNode(`${name}h${i}`, ++i);
        hand.style.display = 'flex';
        hand.style.flexDirection = 'row';
        hand.style.justifyContent = 'center';
        hand.style.alignItems = 'center';
        hand.style.border = `2px solid rgb(${parseInt(Math.random()*300)}, 0, ${parseInt(Math.random()*200)})`;
        hand.style.margin = '10px';
        hand.style.padding = '10px';
        hand.style.overflow = 'hidden';
        hand.style.borderRadius = '50%';
        container.appendChild(hand);
      }

      const node_close = document.createElement('button');
      node_close.innerHTML = 'CLOSE';
      node_close.style.margin = '10px';

      const content = document.createElement('section');
      content.appendChild(node_name);
      content.appendChild(node_add);
      content.appendChild(node_remove);
      content.appendChild(node_close);
      content.appendChild(node_hands);
      content.style.display = 'flex';
      content.style.justifyContent = 'center';
      content.style.alignItems = 'center';
      content.style.margin = '0px';
      content.style.padding = '0px';
      content.style.overflow = 'hidden';
      content.style.flexFlow = 'row wrap';

      let elements_copy = [];

      node_close.onclick = () => {
        let elements = node.getElementsByTagName('div');
        if(elements.length !== 0){
          node_close.innerHTML = 'OPEN';
          while (elements[0]) {
            elements_copy.push(elements[0]);
            node.removeChild(elements[0])
          }
          return;
        }
        if(elements.length === 0){
          node_close.innerHTML = 'CLOSE';
          let i = 0;
          while (elements_copy[i]) node.appendChild(elements_copy[i++]);
          return;
        }
      }

      node.appendChild(content);
      return node;
    }

    const container = document.getElementById('root');
    const container_name = document.createElement('h3');
    container_name.innerHTML = 'ROOT';

    const container_add = document.createElement('button');
    container_add.innerHTML = 'ADD';

    let i = 0;
    container_add.onclick = () => {
      container.appendChild(createNode(`Ghild${i++}`, i));
    }

    const container_close = document.createElement('button');
    container_close.innerHTML = 'CLOSE';

    let elements_clone = [];

    container_close.onclick = () => {
      let elements = container.getElementsByTagName('div');
      if(elements.length !== 0){
        container_close.innerHTML = 'OPEN';
        while (elements[0]) {
          elements_clone.push(elements[0]);
          container.removeChild(elements[0])
        }
        return;
      }
      if(elements.length === 0){
        container_close.innerHTML = 'CLOSE';
        let i = 0;
        while (elements_clone[i]) container.appendChild(elements_clone[i++]);
        return;
      }
    }

    container.appendChild(container_name);
    container.appendChild(container_add);
    container.appendChild(container_close);
    container.style.display = 'flex';
    container.style.alignItems = 'center';
    //container.style.padding = '10px';

    </script>
  </body>
</html>
